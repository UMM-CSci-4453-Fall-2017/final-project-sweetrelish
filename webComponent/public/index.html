<!doctype html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <title>Center for Small Towns Database System</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/hello.all.js"></script>
    <!-- <script>
      hello.init({
        google: "1008997955255-p98t62khiig306k813nn89l9vqnulfbi.apps.googleusercontent.com"
      });
    </script>
    <script src="click.js"></script>
    <script>
      hello.on('auth.login', function (auth) {
        hello(auth.network).api('/me').then(function (resp) {
        var lab = document.createElement("div");
        lab.id = "pic_and_greet";
        lab.innerHTML = '<img src="' + resp.thumbnail + '" /> Hey ' + resp.name;
        document.body.appendChild(lab);
            });
        });
        hello.on('auth.logout', function () {
          var lab = document.getElementById("pic_and_greet");
          if (lab != null) document.body.removeChild( lab );
        });
    </script> -->
    <script>
        var GoogleAuth;
        var SCOPE = 'https://www.googleapis.com/auth/drive.metadata.readonly';
        function handleClientLoad() {
          // Load the API's client and auth2 modules.
          // Call the initClient function after the modules load.
          gapi.load('client:auth2', initClient);
        }

        function initClient() {
          // Retrieve the discovery document for version 3 of Google Drive API.
          // In practice, your app can retrieve one or more discovery documents.
          var discoveryUrl = 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest';

          // Initialize the gapi.client object, which app uses to make API requests.
          // Get API key and client ID from API Console.
          // 'scope' field specifies space-delimited list of access scopes.
          gapi.client.init({
              'apiKey': 'AIzaSyD0V3z-KHFNWZLpctRD2x0i05xNoFkK-1Y',
              'discoveryDocs': [discoveryUrl],
              'clientId': '1008997955255-p98t62khiig306k813nn89l9vqnulfbi.apps.googleusercontent.com',
              'scope': SCOPE
          }).then(function () {
            GoogleAuth = gapi.auth2.getAuthInstance();

            // Listen for sign-in state changes.
            GoogleAuth.isSignedIn.listen(updateSigninStatus);

            // Handle initial sign-in state. (Determine if user is already signed in.)
            var user = GoogleAuth.currentUser.get();
            setSigninStatus();

            // Call handleAuthClick function when user clicks on
            //      "Sign In/Authorize" button.
            $('#sign-in-or-out-button').click(function() {
              handleAuthClick();
            });
            $('#revoke-access-button').click(function() {
              revokeAccess();
            });
          });
        }

        function handleAuthClick() {
          if (GoogleAuth.isSignedIn.get()) {
            // User is authorized and has clicked 'Sign out' button.
            GoogleAuth.signOut();
          } else {
            // User is not signed in. Start Google auth flow.
            GoogleAuth.signIn();
          }
        }

        function revokeAccess() {
          GoogleAuth.disconnect();
        }

        function setSigninStatus(isSignedIn) {
          var user = GoogleAuth.currentUser.get();
          var isAuthorized = user.hasGrantedScopes(SCOPE);
          if (isAuthorized) {
            $('#sign-in-or-out-button').html('Sign out');
            $('#revoke-access-button').css('display', 'inline-block');
            $('#auth-status').html('You are currently signed in and have granted ' +
                'access to this app.');
          } else {
            $('#sign-in-or-out-button').html('Sign In/Authorize');
            $('#revoke-access-button').css('display', 'none');
            $('#auth-status').html('You have not authorized this app or you are ' +
                'signed out.');
          }
        }

        function updateSigninStatus(isSignedIn) {
          setSigninStatus();
        }
      </script>

      <button id="sign-in-or-out-button"
              style="margin-left: 25px">Sign In/Authorize</button>
      <button id="revoke-access-button"
              style="display: none; margin-left: 25px">Revoke access</button>

      <div id="auth-status" style="display: inline; padding-left: 25px"></div><hr>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <script async defer src="https://apis.google.com/js/api.js"
              onload="this.onload=function(){};handleClientLoad()"
              onreadystatechange="if (this.readyState === 'complete') this.onload()">
      </script>
</head>

<style>
  h1.heading {
    font-family: Courier;
    font-size: 50px;
    float: top;
    margin: 0 0 30px 0;
    padding: 5px 0 0 0;
    width: 50%;
  }
  .backgroundImage{
    position: absolute;
    width: 400px;
    height: 145px;
    top: 0px;
    right: 0px;
  }
  ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-color: #333;
  }
  li {
      float: left;
  }
  li a {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 50px;
      text-decoration: none;
      font-size: 30px;
  }
  li a:hover:not(.active) {
      background-color: #111;
  }
  .active {
      background-color: #4CAF50;
  }
</style>

<body ng-app="buttons" ng-controller="buttonCtrl">
  <div>
      <img src="CSTlogo.png" class="backgroundImage"/>
  </div>
  <h1 class="heading">Centers for Small Towns<br>
      Database System</h1>
  <ul>
    <li><a class="active" href="#home">Home</a></li>
    <li><a href="/studentWorkers.html">Student Workers</a></li>
    <li><a href="#">Current Projects</a></li>
    <li><a href="#">Organization</a></li>
    <li><a href="#">Archive</a></li>
  </ul>
  <br>
  <br>
  <br>
  <center><h2>This page should show brief info about the database</h2></center>
  <center><h3>Current User logged-in: Andy Lau</h3></center>
  <center><h3>Current Student Employees: 15</h3></center>
  <center><h3>Community Project in Progress: 45</h3></center>

  <!-- <button class="btn btn-default" ng-click="logOutClick($event)">
        Log-out
    </button>
  <button onclick="hello('google').login()">google</button>
  <button onclick="hello('google').logout()">logout</button> -->
</body>


</html>

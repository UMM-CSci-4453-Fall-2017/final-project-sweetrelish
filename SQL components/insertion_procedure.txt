DELIMITER //

CREATE PROCEDURE insertion(lastName TEXT, firstName TEXT, email TEXT, city TEXT, state TEXT, country TEXT, graduation DATE, major TEXT,
                           projectstatus TEXT, title TEXT, start DATE, end DATE, intensity ENUM('High', 'Medium', 'Low'), description TEXT, funding TEXT, status TEXT, link TEXT, synopsis TEXT, methodology TEXT)

proc_label: BEGIN
DECLARE x INT DEFAULT 0;(SELECT MAX(projectId) FROM Roch.Projects);
DECLARE y INT DEFAULT 0;
SET y = (SELECT MAX(studentID) FROM Roch.studentWorkers);
SET x = (SELECT MAX(projectID) FROM Roch.Projects);
SET x = x + 1;

IF NOT EXISTS(SELECT * FROM Roch.Projects WHERE `Project Title` LIKE title) THEN
INSERT INTO Projects VALUES(x, projectstatus, title, start, end, intensity, description, funding, status, link, synopsis, methodology);
ELSE
    SELECT "title already exists" as `ERROR`;
    LEAVE proc_label;
END IF;

CREATE TABLE TEMP IF NOT EXISTS (lastName TEXT, firstName TEXT, email TEXT, city TEXT, state TEXT, country TEXT, graduation DATE, major TEXT,
                                 projectstatus TEXT, title TEXT, start DATE, end DATE, intensity ENUM('High', 'Medium', 'Low'), description TEXT, funding TEXT, status TEXT, link TEXT, synopsis TEXT, methodology TEXT);

TRUNCATE TEMP;

INSERT INTO TEMP VALUES(lastName TEXT, firstName TEXT, email TEXT, city TEXT, state TEXT, country TEXT, graduation DATE, major TEXT,
                        projectstatus TEXT, title TEXT, start DATE, end DATE, intensity ENUM('High', 'Medium', 'Low'), description TEXT, funding TEXT, status TEXT, link TEXT, synopsis TEXT, methodology TEXT);


IF EXISTS(SELECT * FROM studentWorkers WHERE CONCAT(`First Name`, " ", `Last Name`) LIKE CONCAT(firstName, " ", lastName)) THEN
  #do a while loop like the previous procedure, and add if something exists
  

SELECT * FROM studentWorkers WHERE CONCAT(`First Name`, " ", `Last Name`) LIKE CONCAT(firstName, " ", lastName)

END WHILE while_loop1;









IF NOT EXISTS(SELECT * FROM Roch.studentWorkers WHERE CONCAT(firstName, " ", lastName) LIKE CONCAT(studentWorkers.`First Name`, " ", studentWorkers.`Last Name`)) THEN
INSERT INTO studentWorkers VALUES((select max(studentID) from Roch.studentWorkers) + 1, lastName, firstName, email, city, state, country, graduation, major);
END IF;

INSERT INTO studentsprojects VALUES((SELECT studentID FROM studentWorkers WHERE CONCAT(`First Name`, " ", `Last Name`) LIKE CONCAT(firstName, " ", lastName)),
(SELECT projectID FROM Projects where `Project Title` LIKE title));

END;
//

DELIMITER ;
